var CMN=window.CMN;var SEC=window.SEC;var UTL=window.UTL;var MOCK=window.MOCK;var CFG=CFG||{};
CFG.xml=null;CFG.timeoutId=null;if(typeof CMN==="undefined"){throw"tucsoncommon.js must be loaded first.";
}$("#cmn_btnLogout").on("click",function(){CFG.logout();});CFG.performFunction=function(a,b){CMN.showBusy(b);
CFG.timeoutId=window.setTimeout(function(){var e=this.document.location.host;var d=new window.Image();
d.onload=function(){CFG.clearTimeout();if(a!==undefined){a();}else{CMN.debugLog("The first parameter in CFG.performFunction() defining what 'function' to perform is undefined.");
}jQuery.unblockUI();};d.onabort=function(){CFG.clearTimeout();jQuery.unblockUI();
};d.onerror=function(){CFG.clearTimeout();jQuery.unblockUI({onUnblock:function(){var f="<div class='img_exclamation'></div><div id='invalid_text'>";
f+=String.format(CFG.lookup(CMN.msgs.DEVICE_NOT_RESPONDING),e)+"</div>";CMN.showDialog(f);
}});};var c=(e!==""?document.location.protocol+"//"+e+"/":"")+"themes/base/images/ping.png"+CMN.uniqueQueryString();
d.src=c;},500);};CFG.lookup=function(a){var c=EMPTY;var b=$(CFG.xml).find("Messages");
$(b).each(function(){if($(this).attr("Key")===a.key){var d=$(this)[0].childNodes;
$(d).each(function(){if(parseInt($(this).attr("Id"),10)===a.id){c=window.unescape($(this).text());
return;}});return;}});return c;};CFG.showError=function(b){var c,d=640,a=480;if(b.responseText){c=CMN.fixResponseText(b.responseText);
if(c.length===0){c=CFG.lookup(CMN.msgs.UNKNOWN_ERROR)+(b.status)?(" : "+b.status):".";
d=400;a=200;}}else{c=(b.statusText)?b.statusText:b;d=400;a=200;}CMN.showDialog(c,CFG.lookup(CMN.msgs.CONFIG_ERROR),d,a);
};CFG.clearTimeout=function(){window.clearTimeout(CFG.timeoutId);};CFG.getSelectedTab=function(){var a=CMN.getCookie(document,"selectedtab");
a=(a)?parseInt(a,10):0;return a;};CFG.getCurrentTabIndex=function(){return $("ul.css-tabs>li>a.current").parent().index();
};CFG.getCurrentTabId=function(){return $("ul.css-tabs>li>a.current").attr("id");
};CFG.getCurrentTabName=function(){return $("ul.css-tabs>li>a.current").text();};
CFG.getToolTip=function(a){var b=a.attr("ttp");return b===EMPTY?a.attr("lbl"):b;};
CFG.getCaption=function(a){return CFG.lookup(a)+" '<b>"+CFG.getCurrentTabName()+"</b>'... "+CFG.lookup(CMN.msgs.PLEASE_WAIT)+".";
};CFG.getInvalidText=function(){var a="<div class='img_exclamation'></div><div id='invalid_text'>";
a+=String.format(CFG.lookup(CMN.msgs.INVALID_DATA_ERROR),"<b><i>"+CFG.getCurrentTabName()+"</i></b>");
a+="</div>";return a;};CFG.toggleLoggedInUser=function(){if(CFG.getCurrentTabIndex()>0){var a=CMN.getUsername();
$("#cmn_lblLoggedInUser").text((a)?(CFG.lookup(CMN.msgs.CURRENT_USER)+": "+a):EMPTY);
$("#cmn_btnLogout").css("visibility","visible");}else{$("#cmn_lblLoggedInUser").text("");
$("#cmn_btnLogout").css("visibility","hidden");}};CFG.setLabelsAndTitles=function(e){CFG.toggleLoggedInUser();
var d=$(e).find("*")[0].nodeName;var b=null;var a=null;if(d==="SecuritySettings"){b=SEC.grid;
a=b.getColumns();}var c=$(e).find("Controls").children();$(c).each(function(){var k=$(this).attr("Type");
var i=$("#"+$(this).attr("Id"));var g=$(this).attr("lbl");var j=$(this).attr("ttp");
if((!j)){j=g;}switch(k){case"button":i.val(g);i.attr("title",j);break;case"label":case"caption":i.text(g);
i.attr("title",j);break;case"link":var h=i.hasClass("abt_lnkExpanded")?"-":"+";i.text(h+g);
i.attr("title",j);break;case"column":if(!a){break;}var f=a[b.getColumnIndex($(this).attr("Id"))];
if(!f){break;}f.name=g;f.toolTip=j;break;}});if(a&&b){b.setColumns(a);}};CFG.handleError=function(a){if(a.status===401||a.status===403){var b="<div class='img_exclamation'></div>";
b+="<div id='invalid_text'>";b+=CFG.lookup(a.status===401?CMN.msgs.INVALID_USERNAME_PASSWORD:CMN.msgs.LOGIN_DISABLED);
b+="</div>";if(a.status===401){CFG.showLogin();}CFG.showInvalid(b);}else{if(a.status===408){CFG.showLogin();
location.reload(true);}else{if(a.status!==200){CFG.showError(a);}}}};CFG.showInfo=function(c,a){var b="img_exclamation";
c=(c)||CMN.msgs.FEATURE_UNAVAILABLE;switch(c){case CMN.msgs.FEATURE_UNDERCONSTRUCTION:b="img_underconstruction";
break;case CMN.msgs.CONFIG_ERROR:b="img_exclamation";break;}CFG.showInvalid("<div class='"+b+"'></div><div id='invalid_text'>"+String.format(CFG.lookup(c),a)+"</div>");
};CFG.showInvalid=function(a){if(!a){a=CFG.getInvalidText();}jQuery.blockUI.defaults.css={};
jQuery.blockUI.defaults.fadeOut=800;jQuery.blockUI({message:a,timeout:2500,theme:false,css:{width:"500px",top:"125px",left:($(window).width()-532)/2+"px",padding:0,margin:0,color:"#000000",border:"3px solid #aaa",backgroundColor:"#ffffff",cursor:null},overlayCSS:{cursor:null},onOverlayClick:jQuery.unblockUI});
};CFG.getLanguage=function(){var a=CMN.getCookie(document,"language");if(!a){a=$(CFG.xml).find("Languages").attr("id");
if(a){CMN.setCookie(document,"language",a,30);}}return(a)?a:"en";};CFG.setLanguage=function(a){if(a){CMN.setCookie(document,"language",a,30);
CFG.load();window.location.reload(true);}};CFG.reloadAllPages=function(){$("ul.css-tabs>li>a").each(function(){var attr=$(this).attr("id");
if(attr){var obj=eval("("+attr+")");if((obj)&&typeof obj.loadPage=="function"){obj.loadPage();
}}});};CFG.setLanguageCombo=function(){var b="<option id='{0}' value='{0}'{2}>{1}</option>";
var d="";var a=CFG.getLanguage();var c=$(CFG.xml).find("Languages").children();$(c).each(function(){d+=String.format(b,$(this).attr("id"),$(this).text(),(a===$(this).attr("id"))?" selected":"");
});if(d!==""){d="<div id='cmn_cboLanguage' class='noPrint'><form action='#'><select id='cmn_cboLanguageOptions'>"+d;
d+="</select></form></div>";$("#cmn_cboLanguage").replaceWith(d);}$("#cmn_cboLanguage").languageSwitcher({effect:"fade",testMode:true,onChange:function(e){$("body").css("cursor","progress");
CFG.setLanguage(e.selectedItem);$("body").css("cursor","default");}});};CFG.load=function(){var b=CFG.getLanguage();
var c="/services/network/configtool?lang="+b;var a="xml";$.ajax({type:"GET",url:c,dataType:a,async:false,success:function(d){if(MOCK.isMockMode()){d=MOCK.addLanguagesToXml(d,b);
}CFG.setLabelsAndTitles(d);CFG.xml=d;CFG.setLanguageCombo();},error:function(d){CFG.handleError(d);
}});};CFG.Timer=function(e){var f=this;var d=(typeof e!=="undefined")?Math.max(parseInt(e,10),0):300;
var c=parseInt(d/10,10);var a=0;var b=0;this.max=function(g){if(typeof g!=="undefined"){d=Math.max(parseInt(g,10),0);
c=parseInt(d/10,10);f.restart();}return d;};this.count=function(){return a;};this.reset=function(){a=0;
};this.restart=function(){if(this.isStarted){f.stop();f.start();}};this.start=function(){if(c>0){b=window.setInterval(function(){a+=c;
if(a>=d){CFG.logout();}},c*1000);}this.isStarted=true;};this.stop=function(){window.clearInterval(b);
b=0;a=0;this.isStarted=false;};this.isStarted=false;};CFG.toggle=function(a,c){var d=$("li>#"+a);
if(!c&&d.is(":visible")&&CFG.getCurrentTabId()===a){var b=0;$("ul.css-tabs>li").each(function(){if($(this).children().length>0&&$(this).children()[0].id!==a&&$(this).is(":visible")){$("ul.css-tabs").data("tabs").click(b);
return false;}b++;return true;});}d.toggle(c);};CFG.logout=function(){CFG.showLogin();
location.reload(true);if(MOCK.isMockMode()){return;}$.ajax({type:"PUT",url:"/services/network/logout",contentType:"text/xml",global:false,async:false,cache:false,data:null,complete:function(){},error:function(){}});
};CFG.hideLogin=function(){CFG.toggle("NET",true);CFG.toggle("SYS",true);CFG.toggle("INT",false);
CFG.toggle("SEC",true);CFG.toggle("ABT",true);CFG.toggle("XPS",true);CFG.toggle("LGN",false);
if(CFG.idle){CFG.idle.start();}};CFG.showLogin=function(){if(CFG.idle){CFG.idle.stop();
}CFG.toggle("LGN",true);CFG.toggle("NET",false);CFG.toggle("SYS",false);CFG.toggle("INT",false);
CFG.toggle("SEC",false);CFG.toggle("ABT",false);CFG.toggle("XPS",false);CMN.setCookie(document,"selectedtab",0,null);
};if(CFG.getSelectedTab()>0){CFG.hideLogin();}else{CFG.showLogin();}CFG.doReboot=function(){var a=8000;
if(!MOCK.isMockMode()){a=40000;$.ajax({type:"PUT",url:"/services/network/reboot",contentType:"text/xml",global:false,async:true,cache:false,data:null,success:function(){},complete:function(){},error:function(){}});
}CMN.showBusy(CFG.lookup(CMN.msgs.REBOOTING));CFG.timeoutId=window.setTimeout(function(){CFG.showLogin();
location.reload(true);},a);};CFG.autoSize=function(){return CFG.docSize("x");};CFG.clickTab=function(a){$("#"+a).trigger("click");
};CFG.docSize=function(b,a){if(typeof b=="string"||typeof b=="boolean"){var c=CFG.defaultDocSize(typeof b=="boolean");
b=c.width;a=c.height;top.window.moveTo(0,0);}return UTL.docSize(b,a);};CFG.defaultDocSize=function(b){var c=(CFG.getLanguage()==="en")?1008:1135;
var a=0;if((typeof b=="boolean"&&b===true)||(typeof b=="string"&&b.toLowerCase()==="true")){a=$(".css-panes").position().top+$(".css-panes").height()+14;
}else{switch(CFG.getCurrentTabId()){case"LGN":a=436;break;case"NET":a=538;break;case"SYS":a=480;
break;case"SEC":a=769;break;case"XPS":a=665;break;case"ABT":a=790;break;}}return{width:c,height:a};
};$(function(){$("ul.css-tabs").tabs("div.css-panes > div",{effect:"fade",history:false,initialIndex:CFG.getSelectedTab(),onBeforeClick:function(a,b){var c=this.getPanes().eq(b);
if(c[0].children.length===0){var d=this.getTabs().eq(b);CMN.showBusy(String.format("{0} '<b>{1}</b>'... {2}.",CFG.lookup(CMN.msgs.LOADING),d[0].innerText,CFG.lookup(CMN.msgs.PLEASE_WAIT)));
c.load(d.attr("href"));}return true;},onClick:(function(a,b){CMN.setCookie(document,"selectedtab",b,null);
$("ul.css-tabs").trigger("tabChanged",b);return true;})});CFG.idle=new CFG.Timer();
$(this).mousemove(function(){CFG.idle.reset();});$(this).keypress(function(){CFG.idle.reset();
});$("body").show();});CFG.load();
/*@cc_on
if (/^10/.test(@_jscript_version)) {
	$('head').append('<link rel="stylesheet" type="text/css" href="themes/tucson/configtool10.css">');
}
@*/
